!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@antv/g-lite")):"function"==typeof define&&define.amd?define(["exports","@antv/g-lite"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).G=t.G||{},t.G.CanvasPathGenerator={}),t.window.G)}(this,(function(t,e){"use strict";var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])},a(t,e)};function r(t,e){var a="function"==typeof Symbol&&t[Symbol.iterator];if(!a)return t;var r,n,o=a.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(t){n={error:t}}finally{try{r&&!r.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}return i}function n(t,e){var a=e.r;t.arc(a,a,a,0,2*Math.PI,!1)}function o(t,e){var a=e.rx,r=e.ry;if(t.ellipse)t.ellipse(a,r,a,r,0,0,2*Math.PI,!1);else{var n=a>r?a:r,o=a>r?1:a/r,i=a>r?r/a:1;t.save(),t.scale(o,i),t.arc(0,0,n,0,2*Math.PI)}}function i(t,a){var r=a.x1,n=a.y1,o=a.x2,i=a.y2,s=a.defX,c=void 0===s?0:s,l=a.defY,h=void 0===l?0:l,f=a.markerStart,p=a.markerEnd,v=a.markerStartOffset,u=a.markerEndOffset,d=0,M=0,y=0,T=0,m=0;f&&e.isDisplayObject(f)&&v&&(d=Math.cos(m=Math.atan2(i-n,o-r))*(v||0),M=Math.sin(m)*(v||0)),p&&e.isDisplayObject(p)&&u&&(y=Math.cos(m=Math.atan2(n-i,r-o))*(u||0),T=Math.sin(m)*(u||0)),t.moveTo(r-c+d,n-h+M),t.lineTo(o-c+y,i-h+T)}function s(t,a){var n=a.defX,o=void 0===n?0:n,i=a.defY,s=void 0===i?0:i,c=a.markerStart,l=a.markerEnd,h=a.markerStartOffset,f=a.markerEndOffset,p=a.path,v=p.absolutePath,u=p.segments,d=0,M=0,y=0,T=0,m=0;if(c&&e.isDisplayObject(c)&&h){var P=r(c.parentNode.getStartTangent(),2);d=Math.cos(m=Math.atan2((b=P[0])[1]-(O=P[1])[1],b[0]-O[0]))*(h||0),M=Math.sin(m)*(h||0)}if(l&&e.isDisplayObject(l)&&f){var b,O,S=r(l.parentNode.getEndTangent(),2);y=Math.cos(m=Math.atan2((b=S[0])[1]-(O=S[1])[1],b[0]-O[0]))*(f||0),T=Math.sin(m)*(f||0)}for(var k=0;v.length>k;k++){var g=v[k],E=v[k+1],I=0===k&&(0!==d||0!==M),x=(k===v.length-1||E&&("M"===E[0]||"Z"===E[0]))&&0!==y&&0!==T;switch(g[0]){case"M":I?(t.moveTo(g[1]-o+d,g[2]-s+M),t.lineTo(g[1]-o,g[2]-s)):t.moveTo(g[1]-o,g[2]-s);break;case"L":x?t.lineTo(g[1]-o+y,g[2]-s+T):t.lineTo(g[1]-o,g[2]-s);break;case"Q":t.quadraticCurveTo(g[1]-o,g[2]-s,g[3]-o,g[4]-s),x&&t.lineTo(g[3]-o+y,g[4]-s+T);break;case"C":t.bezierCurveTo(g[1]-o,g[2]-s,g[3]-o,g[4]-s,g[5]-o,g[6]-s),x&&t.lineTo(g[5]-o+y,g[6]-s+T);break;case"A":var j=u[k].arcParams,w=j.cx,G=j.cy,L=j.rx,C=j.ry,D=j.startAngle,_=j.endAngle,A=j.xRotation,Y=j.sweepFlag;if(t.ellipse)t.ellipse(w-o,G-s,L,C,A,D,_,!!(1-Y));else{var N=L>C?L:C,R=L>C?1:L/C,X=L>C?C/L:1;t.translate(w-o,G-s),t.rotate(A),t.scale(R,X),t.arc(0,0,N,D,_,!!(1-Y)),t.scale(1/R,1/X),t.rotate(-A),t.translate(-(w-o),-(G-s))}x&&t.lineTo(g[6]-o+y,g[7]-s+T);break;case"Z":t.closePath()}}}function c(t,a){var r=a.defX,n=void 0===r?0:r,o=a.defY,i=void 0===o?0:o,s=a.markerStart,c=a.markerEnd,l=a.markerStartOffset,h=a.markerEndOffset,f=a.points.points,p=f.length,v=f[0][0]-n,u=f[0][1]-i,d=f[p-1][0]-n,M=f[p-1][1]-i,y=0,T=0,m=0,P=0,b=0;s&&e.isDisplayObject(s)&&l&&(y=Math.cos(b=Math.atan2(f[1][1]-f[0][1],f[1][0]-f[0][0]))*(l||0),T=Math.sin(b)*(l||0)),c&&e.isDisplayObject(c)&&h&&(m=Math.cos(b=Math.atan2(f[p-1][1]-f[0][1],f[p-1][0]-f[0][0]))*(h||0),P=Math.sin(b)*(h||0)),t.moveTo(v+(y||m),u+(T||P));for(var O=1;p-1>O;O++){var S=f[O];t.lineTo(S[0]-n,S[1]-i)}t.lineTo(d,M)}function l(t,a){var r=a.defX,n=void 0===r?0:r,o=a.defY,i=void 0===o?0:o,s=a.markerStart,c=a.markerEnd,l=a.markerStartOffset,h=a.markerEndOffset,f=a.points.points,p=f.length,v=f[0][0]-n,u=f[0][1]-i,d=f[p-1][0]-n,M=f[p-1][1]-i,y=0,T=0,m=0,P=0,b=0;s&&e.isDisplayObject(s)&&l&&(y=Math.cos(b=Math.atan2(f[1][1]-f[0][1],f[1][0]-f[0][0]))*(l||0),T=Math.sin(b)*(l||0)),c&&e.isDisplayObject(c)&&h&&(m=Math.cos(b=Math.atan2(f[p-2][1]-f[p-1][1],f[p-2][0]-f[p-1][0]))*(h||0),P=Math.sin(b)*(h||0)),t.moveTo(v+y,u+T);for(var O=1;p-1>O;O++){var S=f[O];t.lineTo(S[0]-n,S[1]-i)}t.lineTo(d+m,M+P)}var h=function(t,e,a){return e>t?e:t>a?a:t};function f(t,e){var a=e.radius,n=e.width,o=e.height,i=n,s=o;if(a&&a.some((function(t){return 0!==t}))){var c=n>0?1:-1,l=o>0?1:-1,f=c+l===0,p=r(a.map((function(t){return h(t,0,Math.min(Math.abs(i)/2,Math.abs(s)/2))})),4),v=p[0],u=p[1],d=p[2],M=p[3];t.moveTo(c*v,0),t.lineTo(i-c*u,0),0!==u&&t.arc(i-c*u,l*u,u,-l*Math.PI/2,c>0?0:Math.PI,f),t.lineTo(i,s-l*d),0!==d&&t.arc(i-c*d,s-l*d,d,c>0?0:Math.PI,l>0?Math.PI/2:1.5*Math.PI,f),t.lineTo(c*M,s),0!==M&&t.arc(c*M,s-l*M,M,l>0?Math.PI/2:-Math.PI/2,c>0?Math.PI:0,f),t.lineTo(0,l*v),0!==v&&t.arc(c*v,l*v,v,c>0?Math.PI:0,l>0?1.5*Math.PI:Math.PI/2,f)}else t.rect(0,0,i,s)}var p=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="canvas-path-generator",e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+e+" is not a constructor or null");function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(r,t),r.prototype.init=function(){var t,a=((t={})[e.Shape.CIRCLE]=n,t[e.Shape.ELLIPSE]=o,t[e.Shape.RECT]=f,t[e.Shape.LINE]=i,t[e.Shape.POLYLINE]=l,t[e.Shape.POLYGON]=c,t[e.Shape.PATH]=s,t[e.Shape.TEXT]=void 0,t[e.Shape.GROUP]=void 0,t[e.Shape.IMAGE]=void 0,t[e.Shape.HTML]=void 0,t[e.Shape.MESH]=void 0,t);this.context.pathGeneratorFactory=a},r.prototype.destroy=function(){delete this.context.pathGeneratorFactory},r}(e.AbstractRendererPlugin);t.Plugin=p}));
//# sourceMappingURL=index.umd.min.js.map
