!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@antv/g-lite")):"function"==typeof define&&define.amd?define(["exports","@antv/g-lite"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).G=t.G||{},t.G.MobileSVG={}),t.window.G)}(this,(function(t,e){"use strict";var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},n(t,e)};function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+e+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var i=function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;r>n;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i.apply(this,arguments)};function a(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{l(r.next(t))}catch(t){a(t)}}function c(t){try{l(r.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,c)}l((r=r.apply(t,e||[])).next())}))}function o(t,e){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&i[3]>c[1])){o.label=c[1];break}if(6===c[0]&&i[1]>o.label){o.label=i[1],i=c;break}if(i&&i[2]>o.label){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=e.call(t,o)}catch(t){c=[6,t],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}var l="undefined"!=typeof Float32Array?Float32Array:Array;function s(){var t=new l(16);return l!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function u(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],c=e[5],l=e[6],s=e[7],u=e[8],d=e[9],p=e[10],f=e[11],h=e[12],v=e[13],m=e[14],g=e[15],y=n*c-r*o,b=n*l-i*o,A=n*s-a*o,E=r*l-i*c,S=r*s-a*c,x=i*s-a*l,C=u*v-d*h,w=u*m-p*h,T=u*g-f*h,O=d*m-p*v,k=d*g-f*v,M=p*g-f*m,P=y*M-b*k+A*O+E*T-S*w+x*C;return P?(t[0]=(c*M-l*k+s*O)*(P=1/P),t[1]=(i*k-r*M-a*O)*P,t[2]=(v*x-m*S+g*E)*P,t[3]=(p*S-d*x-f*E)*P,t[4]=(l*T-o*M-s*w)*P,t[5]=(n*M-i*T+a*w)*P,t[6]=(m*A-h*x-g*b)*P,t[7]=(u*x-p*A+f*b)*P,t[8]=(o*k-c*T+s*C)*P,t[9]=(r*T-n*k-a*C)*P,t[10]=(h*S-v*A+g*y)*P,t[11]=(d*A-u*S-f*y)*P,t[12]=(c*w-o*O-l*C)*P,t[13]=(n*O-r*w+i*C)*P,t[14]=(v*b-h*E-m*y)*P,t[15]=(u*E-d*b+p*y)*P,t):null}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var d=function(t){return null==t},p={}.toString,f=function(t,e){return p.call(t)==="[object "+e+"]"},h=function(t){return f(t,"String")},v=function(t,e,n){return e>t?e:t>n?n:t},m=function(){function t(t){this.dragndropPluginOptions=t}return t.prototype.apply=function(e){var n=this,r=e.renderingService,i=e.renderingContext.root.ownerDocument,c=i.defaultView,l=function(t){var e=t.target,r=e===i,l=r&&n.dragndropPluginOptions.isDocumentDraggable?i:e.closest&&e.closest("[draggable=true]");if(l){var s=!1,u=t.timeStamp,d=[t.clientX,t.clientY],p=null,f=[t.clientX,t.clientY],h=function(t){return a(n,void 0,void 0,(function(){var n,a,c,h,v,m;return o(this,(function(o){switch(o.label){case 0:if(!s){if(n=t.timeStamp-u,a=Math.sqrt(((g=[t.clientX,t.clientY])[0]-(y=d)[0])*(g[0]-y[0])+(g[1]-y[1])*(g[1]-y[1])),this.dragndropPluginOptions.dragstartTimeThreshold>=n||this.dragndropPluginOptions.dragstartDistanceThreshold>=a)return[2];t.type="dragstart",l.dispatchEvent(t),s=!0}return t.type="drag",t.dx=t.clientX-f[0],t.dy=t.clientY-f[1],l.dispatchEvent(t),f=[t.clientX,t.clientY],r?[3,2]:(c="pointer"===this.dragndropPluginOptions.overlap?[t.canvasX,t.canvasY]:e.getBounds().center,[4,i.elementsFromPoint(c[0],c[1])]);case 1:h=o.sent(),v=h[h.indexOf(e)+1],m=(null==v?void 0:v.closest("[droppable=true]"))||(this.dragndropPluginOptions.isDocumentDroppable?i:null),p!==m&&(p&&(t.type="dragleave",t.target=p,p.dispatchEvent(t)),m&&(t.type="dragenter",t.target=m,m.dispatchEvent(t)),(p=m)&&(t.type="dragover",t.target=p,p.dispatchEvent(t))),o.label=2;case 2:return[2]}var g,y}))}))};c.addEventListener("pointermove",h);var v=function(t){if(s){t.detail={preventClick:!0};var e=t.clone();p&&(e.type="drop",e.target=p,p.dispatchEvent(e)),e.type="dragend",l.dispatchEvent(e),s=!1}c.removeEventListener("pointermove",h)};e.addEventListener("pointerup",v,{once:!0}),e.addEventListener("pointerupoutside",v,{once:!0})}};r.hooks.init.tap(t.tag,(function(){c.addEventListener("pointerdown",l)})),r.hooks.destroy.tap(t.tag,(function(){c.removeEventListener("pointerdown",l)}))},t.tag="Dragndrop",t}(),g=function(t){function e(e){void 0===e&&(e={});var n=t.call(this)||this;return n.options=e,n.name="dragndrop",n}return r(e,t),e.prototype.init=function(){this.addRenderingPlugin(new m(i({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)))},e.prototype.destroy=function(){this.removeAllRenderingPlugins()},e.prototype.setOptions=function(t){Object.assign(this.plugins[0].dragndropPluginOptions,t)},e}(e.AbstractRendererPlugin),y=function(){function t(){}return t.prototype.apply=function(e){var n=e.renderingService,r=e.config,i=e.contextService.getDomElement(),a=function(t){n.hooks.pointerDown.call(t)},o=function(t){n.hooks.pointerUp.call(t)},c=function(t){n.hooks.pointerMove.call(t)},l=function(t){n.hooks.pointerOver.call(t)},s=function(t){n.hooks.pointerOut.call(t)},u=function(t){n.hooks.click.call(t)},d=function(t){n.hooks.pointerCancel.call(t)};n.hooks.init.tap(t.tag,(function(){i.addEventListener("touchstart",a,!0),i.addEventListener("touchend",o,!0),i.addEventListener("touchmove",c,!0),i.addEventListener("touchcancel",d,!0),i.addEventListener("mouseout",s,!0),i.addEventListener("mouseover",l,!0),r.useNativeClickEvent&&i.addEventListener("click",u,!0)})),n.hooks.destroy.tap(t.tag,(function(){i.removeEventListener("touchstart",a,!0),i.removeEventListener("touchend",o,!0),i.removeEventListener("touchmove",c,!0),i.removeEventListener("touchcancel",d,!0),i.removeEventListener("mouseout",s,!0),i.removeEventListener("mouseover",l,!0),r.useNativeClickEvent&&i.removeEventListener("click",u,!0)}))},t.tag="MobileInteraction",t}(),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="mobile-interaction",e}return r(e,t),e.prototype.init=function(){this.addRenderingPlugin(new y)},e.prototype.destroy=function(){this.removeAllRenderingPlugins()},e}(e.AbstractRendererPlugin),A=Object.freeze({__proto__:null,Plugin:b}),E=function(){function t(){}return t.prototype.apply=function(e,n){var r=this,i=e.config.document,c=e.renderingService,l=e.svgElementMap;c.hooks.pick.tapPromise(t.tag,(function(t){return a(r,void 0,void 0,(function(){return o(this,(function(e){return[2,this.pick(l,i,t)]}))}))})),c.hooks.pickSync.tap(t.tag,(function(t){return r.pick(l,i,t)}))},t.prototype.pick=function(t,e,n){var r,i,a,o=n.topmost,c=(r=n.position).clientX,l=r.clientY;try{var s=[];try{for(var u=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}((e||document).elementsFromPoint(c,l)),d=u.next();!d.done;d=u.next()){var p=t.get(d.value);if(p&&p.isInteractive()&&(s.push(p),o))return n.picked=s,n}}catch(t){i={error:t}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}n.picked=s}catch(t){n.picked=[]}return n},t.tag="SVGPicker",t}(),S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="svg-picker",e}return r(e,t),e.prototype.init=function(){this.addRenderingPlugin(new E)},e.prototype.destroy=function(){this.removeAllRenderingPlugins()},e}(e.AbstractRendererPlugin),x=Object.freeze({__proto__:null,Plugin:S}),C=function(){function t(){}return t.tag="c-svg-element",t}();function w(t,e){var n=e.img,r=void 0===n?"":n,i=e.width,a=e.height;if(t.setAttribute("x","0"),t.setAttribute("y","0"),h(r))t.setAttribute("href",r);else if(r instanceof Image)i||t.setAttribute("width","".concat(r.width)),a||t.setAttribute("height","".concat(r.height)),t.setAttribute("href",r.src);else if(r instanceof HTMLElement&&h(r.nodeName)&&"CANVAS"===r.nodeName.toUpperCase())t.setAttribute("href",r.toDataURL());else if(r instanceof ImageData){var o=document.createElement("canvas");o.setAttribute("width","".concat(r.width)),o.setAttribute("height","".concat(r.height));var c=o.getContext("2d");c&&(c.putImageData(r,0,0),i||t.setAttribute("width","".concat(r.width)),a||t.setAttribute("height","".concat(r.height)),t.setAttribute("href",o.toDataURL()))}}function T(t,n){var r=n.x1,i=n.y1,a=n.x2,o=n.y2,c=n.defX,l=void 0===c?0:c,s=n.defY,u=void 0===s?0:s,d=n.markerStart,p=n.markerEnd,f=n.markerStartOffset,h=n.markerEndOffset,v=0,m=0,g=0,y=0,b=0;d&&e.isDisplayObject(d)&&f&&(v=Math.cos(b=Math.atan2(o-i,a-r))*(f||0),m=Math.sin(b)*(f||0)),p&&e.isDisplayObject(p)&&h&&(g=Math.cos(b=Math.atan2(i-o,r-a))*(h||0),y=Math.sin(b)*(h||0)),t.setAttribute("x1","".concat(r-l+v)),t.setAttribute("y1","".concat(i-u+m)),t.setAttribute("x2","".concat(a-l+g)),t.setAttribute("y2","".concat(o-u+y))}function O(t,n){var r=n.path,i=n.defX,a=void 0===i?0:i,o=n.defY,l=void 0===o?0:o,s=n.markerStart,u=n.markerEnd,d=n.markerStartOffset,p=n.markerEndOffset,f=0,h=0,v=0,m=0,g=0;if(s&&e.isDisplayObject(s)&&d){var y=c(s.parentNode.getStartTangent(),2);f=Math.cos(g=Math.atan2((b=y[0])[1]-(A=y[1])[1],b[0]-A[0]))*(d||0),h=Math.sin(g)*(d||0)}if(u&&e.isDisplayObject(u)&&p){var b,A,E=c(u.parentNode.getEndTangent(),2);v=Math.cos(g=Math.atan2((b=E[0])[1]-(A=E[1])[1],b[0]-A[0]))*(p||0),m=Math.sin(g)*(p||0)}t.setAttribute("d",e.translatePathToString(r.absolutePath,a,l,f,h,v,m))}function k(t,n){var r=n.points.points,i=n.defX,a=void 0===i?0:i,o=n.defY,c=void 0===o?0:o,l=n.markerStart,s=n.markerStartOffset,u=n.markerEnd,d=n.markerEndOffset,p=r.length;if(r&&p>=2){var f=0,h=0,v=0,m=0,g=0;l&&e.isDisplayObject(l)&&s&&(f=Math.cos(g=Math.atan2(r[1][1]-r[0][1],r[1][0]-r[0][0]))*(s||0),h=Math.sin(g)*(s||0)),u&&e.isDisplayObject(u)&&d&&(v=Math.cos(g=Math.atan2(r[p-2][1]-r[p-1][1],r[p-2][0]-r[p-1][0]))*(d||0),m=Math.sin(g)*(d||0)),t.setAttribute("points",r.map((function(t,e){var n=0,r=0;return 0===e?(n=f,r=h):e===p-1&&(n=v,r=m),"".concat(t[0]-a+n,",").concat(t[1]-c+r)})).join(" "))}}function M(t,e){var n=e.radius,r=e.width,i=e.height;if(isFinite(r)&&isFinite(i)){var a="";if(n&&n.some((function(t){return 0!==t}))){var o=c(n.map((function(t){return v(t,0,Math.min(Math.abs(r)/2,Math.abs(i)/2))})),4),l=o[0],s=o[1],u=o[2],d=o[3],p=r>0?1:-1,f=i>0?1:-1,h=p+f!==0?1:0;a=[["M ".concat(p*l,",0")],["l ".concat(r-p*(l+s),",0")],["a ".concat(s,",").concat(s,",0,0,").concat(h,",").concat(p*s,",").concat(f*s)],["l 0,".concat(i-f*(s+u))],["a ".concat(u,",").concat(u,",0,0,").concat(h,",").concat(-p*u,",").concat(f*u)],["l ".concat(p*(u+d)-r,",0")],["a ".concat(d,",").concat(d,",0,0,").concat(h,",").concat(-p*d,",").concat(-f*d)],["l 0,".concat(f*(d+l)-i)],["a ".concat(l,",").concat(l,",0,0,").concat(h,",").concat(p*l,",").concat(-f*l)],["z"]].join(" ")}else a="M 0,0 l ".concat(r,",0 l 0,").concat(i," l").concat(-r," 0 z");t.setAttribute("d",a)}}function P(t,e){return(e||document).createElementNS("http://www.w3.org/2000/svg",t)}function G(t){return t.toFixed(6).replace(".000000","")}function L(t){return t.replace(/[&|<|>|"|']/g,(function(t){return"&"===t?"&amp;":"<"===t?"&lt;":">"===t?"&gt;":'"'===t?"&quot;":"&apos;"}))}var D,R,V={opacity:"opacity",fillStyle:"fill",fill:"fill",fillRule:"fill-rule",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",clipPath:"clip-path",textPath:"text-path",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",letterSpacing:"letter-spacing",startArrow:"marker-start",endArrow:"marker-end",class:"class",id:"id",preserveAspectRatio:"preserveAspectRatio",visibility:"visibility",anchor:"anchor",shadowColor:"flood-color",shadowBlur:"stdDeviation",shadowOffsetX:"dx",shadowOffsetY:"dy",filter:"filter",innerHTML:"innerHTML",textAlign:"text-anchor",pointerEvents:"pointer-events"},N={textAlign:{inherit:"inherit",left:"left",start:"left",center:"middle",right:"end",end:"end"}},$={textAlign:"inherit",lineCap:"butt",lineJoin:"miter",lineWidth:"1px",opacity:"1",fillOpacity:"1",fillRule:"nonzero",strokeOpacity:"1",strokeWidth:"0",strokeMiterLimit:"4",letterSpacing:"0",fontSize:"inherit",fontFamily:"inherit",pointerEvents:"auto"},U="g-svg",I="clip-path-",_="text-path-",H=function(){function t(t,e,n){this.pluginOptions=t,this.defElementManager=e,this.context=n,this.svgElementMap=new WeakMap,this.renderQueue=[],this.dirtyAttributes=new WeakMap,this.pendingReorderQueue=new Set,this.clipPathUseMap=new WeakMap}return t.prototype.apply=function(n){var r=this,i=n.renderingService,a=n.renderingContext;this.context=n,this.context.svgElementMap=this.svgElementMap;var o=a.root.ownerDocument.defaultView,c=this.context.config.document,l=function(t){var e=t.target;if(r.clipPathUseMap.get(e)){var n=r.defElementManager.getDefElement().querySelector("#".concat(r.getId(e)));n&&n.remove()}r.createSVGDom(c,e,r.$camera)},d=function(t){var e=t.target;r.defElementManager.clear(e.entity),r.clipPathUseMap.delete(e),r.removeSVGDom(e)},p=function(t){var e,n,i=t.parentNode,a=null===(n=null===(e=t.parentNode)||void 0===e?void 0:e.elementSVG)||void 0===n?void 0:n.$groupEl,o=((null==i?void 0:i.children)||[]).slice();a&&r.reorderChildren(c,a,o)},f=function(t){p(t.target)},h=function(t){var e=t.target;if(e.elementSVG){var n=t.attrName,i=r.dirtyAttributes.get(e);i||(r.dirtyAttributes.set(e,[]),i=r.dirtyAttributes.get(e)),i.push(n)}},v=function(t){var n,i=t.target,a=null===(n=i.elementSVG)||void 0===n?void 0:n.$el,o=i.parsedStyle,c=o.fill,l=o.stroke,d=o.clipPath;if(c&&!e.isCSSRGB(c)&&r.defElementManager.createOrUpdateGradientAndPattern(i,a,c,"fill",r),l&&!e.isCSSRGB(l)&&r.defElementManager.createOrUpdateGradientAndPattern(i,a,l,"stroke",r),d){var p=u(s(),i.getWorldTransform()),f=I+d.entity+"-"+i.entity,h=r.defElementManager.getDefElement().querySelector("#".concat(f));h&&r.applyTransform(h,p)}};i.hooks.init.tap(t.tag,(function(){var t,n=(t=r.context.config).background,i=t.document;r.defElementManager.init();var a=r.context.contextService.getContext();n&&(a.style.background=n),a.setAttribute("color-interpolation-filters","sRGB"),r.$camera=P("g",i),r.$camera.id="".concat(U,"-camera"),r.applyTransform(r.$camera,r.context.camera.getOrthoMatrix()),a.appendChild(r.$camera),o.addEventListener(e.ElementEvent.MOUNTED,l),o.addEventListener(e.ElementEvent.UNMOUNTED,d),o.addEventListener(e.ElementEvent.REPARENT,f),o.addEventListener(e.ElementEvent.ATTR_MODIFIED,h),o.addEventListener(e.ElementEvent.BOUNDS_CHANGED,v)})),i.hooks.destroy.tap(t.tag,(function(){o.removeEventListener(e.ElementEvent.MOUNTED,l),o.removeEventListener(e.ElementEvent.UNMOUNTED,d),o.removeEventListener(e.ElementEvent.REPARENT,f),o.removeEventListener(e.ElementEvent.ATTR_MODIFIED,h),o.removeEventListener(e.ElementEvent.BOUNDS_CHANGED,v)})),i.hooks.render.tap(t.tag,(function(t){r.renderQueue.push(t)})),i.hooks.beginFrame.tap(t.tag,(function(){var t=r.context.config.document;r.pendingReorderQueue.size&&(r.pendingReorderQueue.forEach((function(e){var n,i=((null==e?void 0:e.children)||[]).slice(),a=null===(n=null==e?void 0:e.elementSVG)||void 0===n?void 0:n.$groupEl;a&&r.reorderChildren(t||c,a,i||[])})),r.pendingReorderQueue.clear())})),i.hooks.endFrame.tap(t.tag,(function(){a.renderReasons.has(e.RenderReason.CAMERA_CHANGED)&&r.applyTransform(r.$camera,r.context.camera.getOrthoMatrix()),r.renderQueue.forEach((function(t){var e,n,i=null===(e=t.elementSVG)||void 0===e?void 0:e.$el,a=null===(n=t.elementSVG)||void 0===n?void 0:n.$groupEl;if(i&&a){var o=t.getLocalTransform();r.applyTransform(a,o);var c=r.clipPathUseMap.get(t);c&&c.length&&c.forEach((function(e){r.applyTransform(e,t.getWorldTransform())})),t.renderable.dirty=!1}var l=r.dirtyAttributes.get(t);l&&(l.forEach((function(e){"zIndex"===e?p(t):"increasedLineWidthForHitTesting"===e&&r.createOrUpdateHitArea(t,i,a),r.updateAttribute(t,[e])})),r.dirtyAttributes.delete(t))})),r.renderQueue=[]}))},t.prototype.getId=function(t){return"".concat(U,"-").concat(t.entity)},t.prototype.reorderChildren=function(t,e,n){if(n.sort((function(t,e){return t.sortable.renderOrder-e.sortable.renderOrder})),n.length){var r=(t||document).createDocumentFragment();n.forEach((function(t){if(t.isConnected){var e=t.elementSVG.$groupEl;e&&r.appendChild(e)}})),e.appendChild(r)}},t.prototype.applyTransform=function(t,e){t.setAttribute("transform","matrix(".concat(G(e[0]),",").concat(G(e[1]),",").concat(G(e[4]),",").concat(G(e[5]),",").concat(G(e[12]),",").concat(G(e[13]),")"))},t.prototype.applyAttributes=function(t){var n=t.elementSVG,r=null==n?void 0:n.$el;if(r&&(null==n?void 0:n.$groupEl)){var i=t.nodeName,a=t.attributes;r.setAttribute("fill","none"),i===e.Shape.IMAGE&&r.setAttribute("preserveAspectRatio","none"),this.updateAttribute(t,Object.keys(a))}},t.prototype.updateAttribute=function(t,n){var r,i=this,a=this.context.config.document,o=(r=t.elementSVG).$el,c=r.$groupEl,l=r.$hitTestingEl,s=t.parsedStyle,u=t.computedStyle,p=t.nodeName;n.some((function(e){return i.context.SVGElementLifeCycleContribution.shouldUpdateElementAttribute(t,e)}))&&o&&[o,l].forEach((function(n){n&&(i.context.SVGElementLifeCycleContribution.updateElementAttribute(t,n,i.svgElementMap),t.nodeName!==e.Shape.TEXT&&i.updateAnchorWithTransform(t))})),n.forEach((function(n){var r,f,h=V[n],v=e.runtime.enableCSSParsing?u[n]:s[n],m=!d(v)&&""+v,g=(null===(r=N[n])||void 0===r?void 0:r[m])||m,y=s[n],b=h&&!!(null===(f=e.propertyMetadataCache[n])||void 0===f?void 0:f.inh);h&&(p!==e.Shape.GROUP&&!t.isCustomElement||e.runtime.enableCSSParsing||!b&&"fill"!==h&&"stroke"!==h)&&(p===e.Shape.HTML&&("lineWidth"===n?o.style["border-width"]="".concat(y||0,"px"):"lineDash"===n&&(o.style["border-style"]="dashed")),"fill"===n?p===e.Shape.HTML?o.style.background=""+y:i.defElementManager.createOrUpdateGradientAndPattern(t,o,y,h,i):"stroke"===n?p===e.Shape.HTML?(o.style["border-color"]=""+y,o.style["border-style"]="solid"):i.defElementManager.createOrUpdateGradientAndPattern(t,o,y,h,i):e.runtime.enableCSSParsing&&b?"unset"!==m&&m!==$[n]?null==c||c.setAttribute(h,g):null==c||c.removeAttribute(h):"clipPath"===n?i.createOrUpdateClipOrTextPath(a,y,t):"textPath"===n?i.createOrUpdateClipOrTextPath(a,y,t,!0):"shadowType"===n||"shadowColor"===n||"shadowBlur"===n||"shadowOffsetX"===n||"shadowOffsetY"===n?i.defElementManager.createOrUpdateShadow(t,o,n):"filter"===n?i.defElementManager.createOrUpdateFilter(t,o,y):"innerHTML"===n?i.createOrUpdateInnerHTML(a,o,y):"anchor"===n?p!==e.Shape.TEXT&&i.updateAnchorWithTransform(t):d(v)||[o,l].forEach((function(t){t&&h&&("unset"!==m&&m!==$[n]?t.setAttribute(h,g):t.removeAttribute(h))})))}))},t.prototype.createSVGDom=function(t,n,r,i){var a;void 0===i&&(i=!1),n.elementSVG=new C;var o=n.elementSVG,c=this.context.SVGElementLifeCycleContribution.createElement(n,this.svgElementMap);if(c){var l=void 0;n.nodeName===e.Shape.HTML&&(n.parsedStyle.$el=c),this.pluginOptions.outputSVGElementId&&(c.id=this.getId(n)),this.pluginOptions.outputSVGElementName&&n.name&&c.setAttribute("name",n.name),!c.hasAttribute("data-wrapgroup")&&"g"===c.nodeName||i?l=c:((l=P("g",t)).id=c.id+"-g",l.appendChild(c)),o.$el=c,o.$groupEl=l,this.applyAttributes(n),this.createOrUpdateHitArea(n,c,l);var s=r||n.parentNode&&(null===(a=n.parentNode.elementSVG)||void 0===a?void 0:a.$groupEl);s&&(s.appendChild(l),this.pendingReorderQueue.add(n.parentNode))}},t.prototype.removeSVGDom=function(t){var e,n=null===(e=t.elementSVG)||void 0===e?void 0:e.$groupEl;n&&n.parentNode&&(n.parentNode.removeChild(n),this.context.SVGElementLifeCycleContribution.destroyElement(t,n))},t.prototype.createOrUpdateHitArea=function(t,e,n){var r=t.elementSVG,i=r.$hitTestingEl,a=t.parsedStyle.increasedLineWidthForHitTesting;if(a){if(!i){i=e.cloneNode(),this.pluginOptions.outputSVGElementId&&(i.id="".concat(U,"-").concat(t.nodeName,"-hittesting-").concat(t.entity)),["filter"].forEach((function(t){i.removeAttribute(t)}));var o="none"!==e.getAttribute("fill");i.setAttribute("fill",o?"transparent":"none"),i.setAttribute("stroke","transparent"),n.appendChild(i),r.$hitTestingEl=i}i.setAttribute("stroke-width","".concat(a+t.parsedStyle.lineWidth))}else i&&(n.removeChild(i),r.$hitTestingEl=null)},t.prototype.createOrUpdateInnerHTML=function(t,e,n){var r=(t||document).createElement("div");"string"==typeof n?r.innerHTML=n:r.appendChild(n),e.innerHTML="",e.appendChild(r)},t.prototype.createOrUpdateClipOrTextPath=function(t,e,n,r){void 0===r&&(r=!1);var i=n.elementSVG.$groupEl,a=r?"g":"clipPath",o=r?"text-path":"clip-path";if(e){var c=(r?_:I)+e.entity+"-"+n.entity,l=this.defElementManager.getDefElement();if(!l.querySelector("#".concat(c))){var d=void 0;if(r)this.createSVGDom(t,e,null,!0),d=e.elementSVG.$el;else{if(!e.isConnected)l.querySelector("#".concat(this.getId(e)))||this.createSVGDom(t,e,l,!0);d=P(a,t);var p=P("use",t);p.setAttribute("href","#".concat(e.elementSVG.$el.id)),d.appendChild(p);var f=this.clipPathUseMap.get(e);f||(this.clipPathUseMap.set(e,[]),f=this.clipPathUseMap.get(e)),f.push(p),this.applyTransform(p,e.getWorldTransform());var h=u(s(),n.getWorldTransform());this.applyTransform(d,h)}d.id=c,l.appendChild(d)}this.applyAttributes(e),r||i.setAttribute(o,"url(#".concat(c,")"))}else r||i.removeAttribute(o)},t.prototype.updateAnchorWithTransform=function(t){var n,r,i=t.getGeometryBounds(),a=i&&2*i.halfExtents[0]||0,o=i&&2*i.halfExtents[1]||0,c=(t.parsedStyle||{}).anchor;[null===(n=t.elementSVG)||void 0===n?void 0:n.$el,null===(r=t.elementSVG)||void 0===r?void 0:r.$hitTestingEl].forEach((function(n){if(n){var r=-c[0]*a,i=-c[1]*o;0===r&&0===i||n.setAttribute("transform","translate(".concat(r,",").concat(i,")")),t.nodeName!==e.Shape.CIRCLE&&t.nodeName!==e.Shape.ELLIPSE||(n.setAttribute("cx","".concat(a/2)),n.setAttribute("cy","".concat(o/2)))}}))},t.tag="SVGRenderer",t}(),F={top:"hanging",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",ideographic:"ideographic",hanging:"hanging"};function j(t,n,r){var i=n.lineWidth,a=n.dx,o=n.dy,c=n.textPath,l=n.textPathSide,s=void 0===l?"left":l,u=n.textPathStartOffset,d=void 0===u?0:u,p=n.textDecorationLine,f=void 0===p?"":p,h=n.textDecorationColor,v=void 0===h?"":h,m=n.textDecorationStyle,g=void 0===m?"":m,y=n.metrics,b=n.textBaseline;e.runtime.enableCSSParsing||"alphabetic"!==b||(b="bottom"),t.setAttribute("dominant-baseline",F[b]),t.setAttribute("paint-order","stroke");var A=y.lines,E=y.lineHeight,S=y.height,x=A.length,C="";if(0===a&&0===o||(C+="transform:translate(".concat(a,"px, ").concat(o,"px);")),f&&"none"!==f&&(C+="text-decoration:".concat(f," ").concat(g," ").concat(v,";")),C&&t.setAttribute("style",C),1===x){var w=L(A[0]);if(t.setAttribute("dx","".concat(i/2)),"bottom"!==b&&"top"!==b||(t.setAttribute("dominant-baseline",F.middle),t.setAttribute("dy","bottom"===b?"-".concat(S/2,"px"):"".concat(S/2,"px"))),c){t.innerHTML="";var T=P("textPath",t.ownerDocument);T.setAttribute("href","#".concat(_+c.entity)),"left"!==s&&T.setAttribute("side",s),0!==d&&T.setAttribute("startOffset","".concat(d)),T.innerHTML=w,t.appendChild(T)}else t.innerHTML=w}else t.innerHTML=A.map((function(t,e){var n=0;return 0===e?"middle"===b?n=E/2-S/2:"top"===b||"hanging"===b?n=0:"bottom"!==b&&"alphabetic"!==b&&"ideographic"!==b||(n=-E*(x-1)):n=E,'<tspan x="0" dx="'.concat(i/2,'" dy="').concat(n,'">').concat(L(t),"</tspan>")})).join("")}var B=((D={})[e.Shape.RECT]="path",D[e.Shape.CIRCLE]="circle",D[e.Shape.ELLIPSE]="ellipse",D[e.Shape.IMAGE]="image",D[e.Shape.GROUP]="g",D[e.Shape.LINE]="line",D[e.Shape.POLYLINE]="polyline",D[e.Shape.POLYGON]="polygon",D[e.Shape.TEXT]="text",D[e.Shape.PATH]="path",D[e.Shape.HTML]="foreignObject",D),X=((R={})[e.Shape.CIRCLE]=["r"],R[e.Shape.ELLIPSE]=["rx","ry"],R[e.Shape.RECT]=["width","height","radius"],R[e.Shape.IMAGE]=["img","width","height"],R[e.Shape.LINE]=["x1","y1","x2","y2","markerStart","markerEnd","markerStartOffset","markerEndOffset"],R[e.Shape.POLYLINE]=["points","markerStart","markerEnd","markerMid","markerStartOffset","markerEndOffset"],R[e.Shape.POLYGON]=["points","markerStart","markerEnd","markerMid","markerStartOffset","markerEndOffset"],R[e.Shape.PATH]=["path","markerStart","markerEnd","markerMid","markerStartOffset","markerEndOffset"],R[e.Shape.TEXT]=["text","font","fontSize","fontFamily","fontStyle","fontWeight","fontVariant","lineHeight","letterSpacing","wordWrap","wordWrapWidth","maxLines","leading","textBaseline","textAlign","textTransform","textOverflow","textPath","textPathSide","textPathStartOffset","textDecorationLine","textDecorationColor","textDecorationStyle","dx","dy"],R),W=function(){function t(t){this.context=t}return t.prototype.createElement=function(t,e){var n=P(B[t.nodeName]||"g",this.context.config.document||document);return e.set(n,t),n},t.prototype.destroyElement=function(t,e){},t.prototype.shouldUpdateElementAttribute=function(t,e){return(X[t.nodeName]||[]).indexOf(e)>-1},t.prototype.updateElementAttribute=function(t){var n=t.elementSVG.$el,r=t.parsedStyle;switch(t.nodeName){case e.Shape.IMAGE:w(n,r);break;case e.Shape.RECT:M(n,r);break;case e.Shape.LINE:T(n,r);break;case e.Shape.POLYGON:case e.Shape.POLYLINE:k(n,r);break;case e.Shape.PATH:O(n,r);break;case e.Shape.TEXT:j(n,r)}},t}(),Y="g-filter-";function z(t,e,n,r,i){var a=Y+n.entity,o=e.querySelectorAll("[name=".concat(a,"]"));if(o.length&&o.forEach((function(t){e.removeChild(t)})),0===i.length)null==r||r.removeAttribute("filter");else{var c=i.map((function(n,r){var i=n.name,o=n.params,c=P("filter",t);return c.setAttribute("filterUnits","userSpaceOnUse"),"blur"===i?function(t,e,n){var r=P("feGaussianBlur",t);r.setAttribute("in","SourceGraphic"),r.setAttribute("stdDeviation","".concat(n[0].value)),e.appendChild(r)}(t,c,o):"brightness"===i?function(t,e,n){var r=q(n[0]);Q(t,e,{type:"linear",slope:r,intercept:0})}(t,c,o):"drop-shadow"===i?function(t,e,n){var r=n[0].value,i=n[1].value,a=n[2].value,o=n[3].formatted,c=P("feGaussianBlur",t);c.setAttribute("in","SourceAlpha"),c.setAttribute("stdDeviation","".concat(a)),e.appendChild(c);var l=P("feOffset",t);l.setAttribute("dx","".concat(r)),l.setAttribute("dy","".concat(i)),l.setAttribute("result","offsetblur"),e.appendChild(l);var s=P("feFlood",t);s.setAttribute("flood-color",o),e.appendChild(s);var u=P("feComposite",t);u.setAttribute("in2","offsetblur"),u.setAttribute("operator","in"),e.appendChild(u);var d=P("feMerge",t);e.appendChild(d);var p=P("feMergeNode",t),f=P("feMergeNode",t);f.setAttribute("in","SourceGraphic"),d.appendChild(p),d.appendChild(f)}(t,c,o):"contrast"===i?function(t,e,n){var r=q(n[0]);Q(t,e,{type:"linear",slope:r,intercept:-.5*r+.5})}(t,c,o):"grayscale"===i?function(t,e,n){var r=q(n[0]);J(t,e,[.2126+.7874*(1-r),.7152-.7152*(1-r),.0722-.0722*(1-r),0,0,.2126-.2126*(1-r),.7152+.2848*(1-r),.0722-.0722*(1-r),0,0,.2126-.2126*(1-r),.7152-.7152*(1-r),.0722+.9278*(1-r),0,0,0,0,0,1,0])}(t,c,o):"sepia"===i?function(t,e,n){var r=q(n[0]);J(t,e,[.393+.607*(1-r),.769-.769*(1-r),.189-.189*(1-r),0,0,.349-.349*(1-r),.686+.314*(1-r),.168-.168*(1-r),0,0,.272-.272*(1-r),.534-.534*(1-r),.131+.869*(1-r),0,0,0,0,0,1,0])}(t,c,o):"saturate"===i?function(t,e,n){var r=q(n[0]),i=P("feColorMatrix",t);i.setAttribute("type","saturate"),i.setAttribute("values","".concat(r)),e.appendChild(i)}(t,c,o):"hue-rotate"===i?function(t,e,n){var r=P("feColorMatrix",t);r.setAttribute("type","hueRotate"),r.setAttribute("values","".concat(n[0].value)),e.appendChild(r)}(t,c,o):"invert"===i&&function(t,e,n){var r=q(n[0]);Q(t,e,{type:"table",tableValues:"".concat(r," ").concat(1-r)})}(t,c,o),c.id="".concat(a,"-").concat(r),c.setAttribute("name",a),e.appendChild(c),c.id}));setTimeout((function(){null==r||r.setAttribute("filter",c.map((function(t){return"url(#".concat(t,")")})).join(" "))}))}}function q(t){return t.unit===e.UnitType.kPercentage?t.value/100:t.value}function Q(t,e,n){var r=n.type,i=n.slope,a=n.intercept,o=n.tableValues,c=P("feComponentTransfer",t);[P("feFuncR",t),P("feFuncG",t),P("feFuncB",t)].forEach((function(t){t.setAttribute("type",r),"table"===r?t.setAttribute("tableValues","".concat(o)):(t.setAttribute("slope","".concat(i)),t.setAttribute("intercept","".concat(a))),c.appendChild(t)})),e.appendChild(c)}function J(t,e,n){var r=P("feColorMatrix",t);r.setAttribute("type","matrix"),r.setAttribute("values",n.join(" ")),e.appendChild(r)}var K="g-pattern-",Z={},tt=0;function et(t,n,r,i,a,o,c,l){if(!a)return"";if(!e.isCSSRGB(a)){if(e.isPattern(a)){var s=function(t,n,r,i,a,o){var c=nt(i),l=n.querySelector("#".concat(c));if(!l){var s=i.image,u="";if(h(s)?u=s:e.isBrowser&&(s instanceof HTMLImageElement?u=s.src:s instanceof HTMLCanvasElement&&(u=s.toDataURL())),u){var d,p=P("image",t);p.setAttribute("href",u),a?d=a(u):e.isBrowser&&(d=new window.Image),u.match(/^data:/i)||(d.crossOrigin="Anonymous",p.setAttribute("crossorigin","anonymous")),d.src=u;var f=function(){var e=rt(t,n,r,i,c,d.width,d.height);n.appendChild(e),e.appendChild(p),p.setAttribute("x","0"),p.setAttribute("y","0"),p.setAttribute("width","".concat(d.width)),p.setAttribute("height","".concat(d.height))};d.complete?f():d.onload=f}if("rect"===s.nodeName){var v=s.parsedStyle,m=rt(t,n,s,i,c,v.width,v.height);s.forEach((function(e){o.createSVGDom(t,e,null);var n=e.elementSVG,r=e.getLocalTransform();o.applyTransform(n.$groupEl,r)})),m.appendChild(s.elementSVG.$groupEl)}}return c}(t,n,r,a,c,l);return i.style[o]="url(#".concat(s,")"),s}if(1===a.length){var u=it(t,r,n,i,a[0]);return null==i||i.setAttribute(o,"url(#".concat(u,")")),u}var d=function(t,e,n,r,i){var a=Y+e.entity+"-gradient",o=n.querySelector("#".concat(a));o||((o=P("filter",t)).setAttribute("filterUnits","userSpaceOnUse"),o.setAttribute("x","0%"),o.setAttribute("y","0%"),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.id=a,n.appendChild(o));var c=0;i.forEach((function(i,l){var s=it(t,e,n,r,i),u=s+"_rect",d=P("rect",t);d.setAttribute("x","0"),d.setAttribute("y","0"),d.setAttribute("width","100%"),d.setAttribute("height","100%"),d.setAttribute("fill","url(#".concat(s,")")),d.id=u,n.appendChild(d);var p=P("feImage",t);if(p.setAttribute("href","#".concat(u)),p.setAttribute("result","".concat(a,"-").concat(l)),o.appendChild(p),l>0){var f=P("feBlend",t);f.setAttribute("in",1===l?"".concat(a,"-").concat(l-1):"".concat(a,"-blended-").concat(c-1)),f.setAttribute("in2","".concat(a,"-").concat(l)),f.setAttribute("result","".concat(a,"-blended-").concat(c++)),f.setAttribute("mode","multiply"),o.appendChild(f)}}));var l=P("feComposite",t);return l.setAttribute("in","".concat(a,"-blended-").concat(c)),l.setAttribute("in2","SourceGraphic"),l.setAttribute("operator","in"),o.appendChild(l),a}(t,r,n,i,a);return null==i||i.setAttribute("filter","url(#".concat(d,")")),null==i||i.setAttribute("fill","black"),d}return"currentColor"===r.style[o]?null==i||i.setAttribute(o,"currentColor"):null==i||i.setAttribute(o,a.isNone?"none":""+a),""}function nt(t,n){void 0===n&&(n={});var r="";if(e.isCSSGradientValue(t)){var a=t.type;if(a===e.GradientType.LinearGradient||a===e.GradientType.RadialGradient){var o=i(i({},t.value),n),c=o.width,l=o.height,s=o.steps,u=o.angle,d=o.cx,p=o.cy,f=o.size;r="gradient-".concat(o.type,"-").concat((null==u?void 0:""+u)||0,"-").concat((null==d?void 0:""+d)||0,"-").concat((null==p?void 0:""+p)||0,"-").concat((null==f?void 0:""+f)||0,"-").concat(c,"-").concat(l,"-").concat(s.map((function(t){var e=t.color;return"".concat(t.offset).concat(e)})).join("-"))}}else e.isPattern(t)&&(r=h(t.image)?"pattern-".concat(t.image,"-").concat(t.repetition):"rect"===t.image.nodeName?"pattern-rect-".concat(t.image.entity):"pattern-".concat(tt));return r&&(Z[r]||(Z[r]=K+"".concat(tt++))),Z[r]}function rt(t,n,r,i,a,o,l){var s=i.repetition,u=i.transform,d=P("pattern",t);u&&d.setAttribute("patternTransform",function(t){return e.parseTransform(t).map((function(t){var e=t.t,n=t.d;if("translate"===e)return"translate(".concat(n[0].value," ").concat(n[1].value,")");if("translatex"===e)return"translate(".concat(n[0].value," 0)");if("translatey"===e)return"translate(0 ".concat(n[0].value,")");if("rotate"===e)return"rotate(".concat(n[0].value,")");if("scale"===e){var r=(null==n?void 0:n.map((function(t){return t.value})))||[1,1];return"scale(".concat(r[0],", ").concat(r[1],")")}if("scalex"===e)return r=(null==n?void 0:n.map((function(t){return t.value})))||[1],"scale(".concat(r[0],", 1)");if("scaley"===e)return r=(null==n?void 0:n.map((function(t){return t.value})))||[1],"scale(1, ".concat(r[0],")");if("skew"===e){var i=(null==n?void 0:n.map((function(t){return t.value})))||[0,0];return"skewX(".concat(i[0],") skewY(").concat(i[1],")")}if("skewx"===e)return i=(null==n?void 0:n.map((function(t){return t.value})))||[0],"skewX(".concat(i[0],")");if("skewy"===e)return i=(null==n?void 0:n.map((function(t){return t.value})))||[0],"skewY(".concat(i[0],")");if("matrix"===e){var a=c(n.map((function(t){return t.value})),6),o=a[1],l=a[2],s=a[3],u=a[4],d=a[5];return"matrix(".concat(a[0]," ").concat(o," ").concat(l," ").concat(s," ").concat(u," ").concat(d,")")}})).join(" ")}(u)),d.setAttribute("patternUnits","userSpaceOnUse"),d.id=a,n.appendChild(d),d.setAttribute("x","0"),d.setAttribute("y","0");var p=r.getGeometryBounds().halfExtents,f=o,h=l;return"repeat-x"===s?h=2*p[1]:"repeat-y"===s?f=2*p[0]:"no-repeat"===s&&(f=2*p[0],h=2*p[1]),d.setAttribute("width","".concat(f)),d.setAttribute("height","".concat(h)),d}function it(t,n,r,i,a){var o=n.getGeometryBounds(),c=o&&2*o.halfExtents[0]||0,l=o&&2*o.halfExtents[1]||0,s=nt(a,{width:c,height:l}),u=r.querySelector("#".concat(s));if(!u){(u=P(a.type===e.GradientType.LinearGradient?"linearGradient":"radialGradient",t)).setAttribute("gradientUnits","userSpaceOnUse");var d="";a.value.steps.sort((function(t,e){return t.offset.value-e.offset.value})).forEach((function(t){var e=t.color;d+='<stop offset="'.concat(t.offset.value/100,'" stop-color="').concat(e,'"></stop>')})),u.innerHTML=d,u.id=s,r.appendChild(u)}if(a.type===e.GradientType.LinearGradient){var p=e.computeLinearGradient(c,l,a.value.angle),f=p.y1,h=p.x2,v=p.y2;u.setAttribute("x1","".concat(p.x1)),u.setAttribute("y1","".concat(f)),u.setAttribute("x2","".concat(h)),u.setAttribute("y2","".concat(v))}else{var m=a.value,g=e.computeRadialGradient(c,l,m.cx,m.cy,m.size),y=g.y,b=g.r;u.setAttribute("cx","".concat(g.x)),u.setAttribute("cy","".concat(y)),u.setAttribute("r","".concat(b))}return s}var at=/url\("?#(.*)\)/,ot=function(){function t(t){this.context=t,this.gradientCache={}}return t.prototype.getDefElement=function(){return this.$def},t.prototype.init=function(){var t=this.context.config.document,e=this.context.contextService.getContext();this.$def=P("defs",t),e.appendChild(this.$def)},t.prototype.clear=function(t){var e=this;Object.keys(this.gradientCache).forEach((function(n){e.clearUnusedDefElement(e.gradientCache,n,t)}))},t.prototype.clearUnusedDefElement=function(t,e,n){if(t[e]&&1===t[e].size&&t[e].has(n)){var r=this.$def.querySelector("#".concat(e));r&&this.$def.removeChild(r)}},t.prototype.createOrUpdateGradientAndPattern=function(t,n,r,i,a){var o=this.context.config,c=o.document,l=o.createImage;if(n){var s=(e.isPattern(r)?n.style[i]:n.getAttribute(i)||"").match(at);s&&s.length>1&&this.clearUnusedDefElement(this.gradientCache,s[1].replace('"',""),t.entity);var u=et(c||document,this.$def,t,n,r,i,l,a);u&&(this.gradientCache[u]||(this.gradientCache[u]=new Set),this.gradientCache[u].add(t.entity))}},t.prototype.createOrUpdateShadow=function(t,e,n){!function(t,e,n,r,i){var a=n.parsedStyle,o=a.shadowType,c=a.shadowBlur,l=a.shadowColor,s=a.shadowOffsetX,u=a.shadowOffsetY,p=!d(l)&&c>0,f="g-filter-dropshadow-"+n.entity,h=e.querySelector("#".concat(f));if(h&&(h.getAttribute("data-type")===o&&p||(h.remove(),h=null)),p){if(null==r||r.setAttribute("filter","url(#".concat(f,")")),!h){if((h=P("filter",t)).setAttribute("data-type",o),"outer"===o)(w=P("feDropShadow",t)).setAttribute("dx","".concat((s||0)/2)),w.setAttribute("dy","".concat((u||0)/2)),w.setAttribute("stdDeviation","".concat((c||0)/4)),w.setAttribute("flood-color",""+l),h.appendChild(w);else if("inner"===o){var v=P("feComponentTransfer",t);v.setAttribute("in","SourceAlpha");var m=P("feFuncA",t);m.setAttribute("type","table"),m.setAttribute("tableValues","1 0"),v.appendChild(m),h.appendChild(v),(S=P("feGaussianBlur",t)).setAttribute("stdDeviation","".concat((c||0)/4)),h.appendChild(S),(x=P("feOffset",t)).setAttribute("dx","".concat((s||0)/2)),x.setAttribute("dy","".concat((u||0)/2)),x.setAttribute("result","offsetblur"),h.appendChild(x),(C=P("feFlood",t)).setAttribute("flood-color",""+l),C.setAttribute("result","color"),h.appendChild(C);var g=P("feComposite",t);g.setAttribute("in2","offsetblur"),g.setAttribute("operator","in"),h.appendChild(g);var y=P("feComposite",t);y.setAttribute("in2","SourceAlpha"),y.setAttribute("operator","in"),h.appendChild(y);var b=P("feMerge",t);h.appendChild(b);var A=P("feMergeNode",t);A.setAttribute("in","SourceGraphic");var E=P("feMergeNode",t);b.appendChild(A),b.appendChild(E)}return h.id=f,h.setAttribute("filterUnits","userSpaceOnUse"),void e.appendChild(h)}if("inner"===o){var S=h.children[1],x=h.children[2],C=h.children[3];"shadowColor"===i?C.setAttribute("flood-color",""+l):"shadowBlur"===i?S.setAttribute("stdDeviation","".concat((c||0)/4)):"shadowOffsetX"===i?x.setAttribute("dx","".concat((s||0)/2)):"shadowOffsetY"===i&&x.setAttribute("dy","".concat((u||0)/2))}else if("outer"===o){var w=h.children[0];"shadowColor"===i?w.setAttribute("flood-color",""+l):"shadowBlur"===i?w.setAttribute("stdDeviation","".concat((c||0)/4)):"shadowOffsetX"===i?w.setAttribute("dx","".concat((s||0)/2)):"shadowOffsetY"===i&&w.setAttribute("dy","".concat((u||0)/2))}}else null==r||r.removeAttribute("filter")}(this.context.config.document||document,this.$def,t,e,n)},t.prototype.createOrUpdateFilter=function(t,e,n){z(this.context.config.document||document,this.$def,t,e,n)},t}(),ct=function(t){function e(e){void 0===e&&(e={});var n=t.call(this)||this;return n.options=e,n.name="svg-renderer",n}return r(e,t),e.prototype.init=function(){var t=this.options,e=t.outputSVGElementId,n=t.outputSVGElementName,r=new ot(this.context),i=new W(this.context);this.context.defaultElementLifeCycleContribution=i,this.context.SVGElementLifeCycleContribution=i;var a={outputSVGElementId:!!d(e)||!!e,outputSVGElementName:!!d(n)||!!n};this.addRenderingPlugin(new H(a,r,this.context))},e.prototype.destroy=function(){this.removeAllRenderingPlugins(),delete this.context.defaultElementLifeCycleContribution,delete this.context.SVGElementLifeCycleContribution},e}(e.AbstractRendererPlugin),lt=Object.freeze({__proto__:null,CLIP_PATH_PREFIX:I,DEFAULT_VALUE_MAP:$,DefaultElementLifeCycleContribution:W,ElementSVG:C,G_SVG_PREFIX:U,Plugin:ct,SHAPE2TAGS:B,SHAPE_UPDATE_DEPS:X,SVGRendererPlugin:H,SVG_ATTR_MAP:V,TEXT_PATH_PREFIX:_,createSVGElement:P,updateImageElementAttribute:w,updateLineElementAttribute:T,updatePathElementAttribute:O,updatePolylineElementAttribute:k,updateRectElementAttribute:M,updateTextElementAttribute:j}),st=function(){function t(t){this.canvasConfig=t.config}return t.prototype.init=function(){return a(this,void 0,void 0,(function(){var t,e,n,r,i;return o(this,(function(a){return n=(t=this.canvasConfig).document,this.$container=h(e=t.container)?(n||document).getElementById(e):e,this.$container&&(this.$container.style.position||(this.$container.style.position="relative"),(r=P("svg",n)).setAttribute("width","".concat(this.canvasConfig.width)),r.setAttribute("height","".concat(this.canvasConfig.height)),this.$container.appendChild(r),this.$namespace=r),i=window.devicePixelRatio||1,this.dpr=i=1>i?1:Math.ceil(i),[2]}))}))},t.prototype.getDomElement=function(){return this.$namespace},t.prototype.getContext=function(){return this.$namespace},t.prototype.getDPR=function(){return this.dpr},t.prototype.getBoundingClientRect=function(){var t;return null===(t=this.$namespace)||void 0===t?void 0:t.getBoundingClientRect()},t.prototype.destroy=function(){this.$container&&this.$namespace&&this.$namespace.parentNode&&this.$container.removeChild(this.$namespace)},t.prototype.resize=function(t,e){this.$namespace&&(this.$namespace.setAttribute("width","".concat(t)),this.$namespace.setAttribute("height","".concat(e)))},t.prototype.applyCursorStyle=function(t){this.$container&&(this.$container.style.cursor=t)},t.prototype.toDataURL=function(t){return a(this,void 0,void 0,(function(){var t,e,n;return o(this,(function(r){return t=this.$namespace.cloneNode(!0),e=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),(n=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",e)).replaceChild(t,n.documentElement),[2,"data:image/svg+xml;charset=utf8,".concat(encodeURIComponent((new XMLSerializer).serializeToString(n)))]}))}))},t}(),ut=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="mobile-svg-context-register",e}return r(e,t),e.prototype.init=function(){this.context.ContextService=st},e.prototype.destroy=function(){delete this.context.ContextService},e}(e.AbstractRendererPlugin),dt=function(t){function e(e){var n=t.call(this,e)||this;return n.registerPlugin(new ut),n.registerPlugin(new ct),n.registerPlugin(new b),n.registerPlugin(new S),n.registerPlugin(new g({isDocumentDraggable:!!d(null==e?void 0:e.isDocumentDraggable)||e.isDocumentDraggable,isDocumentDroppable:!!d(null==e?void 0:e.isDocumentDroppable)||e.isDocumentDroppable,dragstartDistanceThreshold:d(null==e?void 0:e.dragstartDistanceThreshold)?10:e.dragstartDistanceThreshold,dragstartTimeThreshold:d(null==e?void 0:e.dragstartTimeThreshold)?50:e.dragstartTimeThreshold})),n}return r(e,t),e}(e.AbstractRenderer);t.MobileInteraction=A,t.Renderer=dt,t.SVGPicker=x,t.SVGRenderer=lt}));
//# sourceMappingURL=index.umd.min.js.map
